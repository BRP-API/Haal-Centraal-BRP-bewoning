openapi: 3.0.0
servers:
  - description: |
                  APILAB testserver bewoning
    url: https://www.haalcentraal.nl/haalcentraal/api/brpbewoning
info:
  title: Bewoning
  description: |
                API voor het zoeken en raadplegen van bewoningen en metagegevens over bewoning (verloop).
                Een bewoning is een adresseerbaar object (verblijfsobject, ligplaats of standplaats) met ingeschreven bewoner(s).
                Iedere samenstelling van bewoners van het object is een bewoning. Overleden personen maken onderdeel uit van een
                bewoning tot het moment van overlijden. Gegevens over de bewoners zijn actueel.
  version: 1.0.0
  contact:
    url: https://github.com/VNG-Realisatie/Haal-Centraal-BRP-bewoning
  license:
    name: European Union Public License, version 1.2 (EUPL-1.2)
    url: https://eupl.eu/1.2/nl/
tags:
  - name: Bewoning
paths:
  /bewoningenhistorie:
    get:
      operationId: GetBewoningen
      description: |
                    Zoek bewoningen door een adresseerbaarObjectIdentificatie of een burgerservicenummer op te geven, samen met een peildatum of periode.
      parameters:
        - $ref: "#/components/parameters/fields"
        - $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/parameters/peildatum"
        - $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/parameters/datumVan"
        - $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/parameters/datumTotEnMet"
        - in: query
          name: burgerservicenummer
          required: false
          description: |
                        Uniek persoonsnummer.
          explode: false
          example: "999993653"
          schema:
            type: string
            pattern: "^[0-9]*$"
            maxLength: 9
            minLength: 9
        - in: query
          name: adresseerbaarObjectIdentificatie
          description: |
                        De unieke identificatie van een verblijfsobject, standplaats of ligplaats.
          required: false
          schema:
            type: string
            pattern: '^[0-9]{16}$'
            example: '0226010000038820'
        - $ref: '#/components/parameters/toonBewoonSamenstelling'
      responses:
        '200':
          description: |
                        Zoekactie geslaagd
          headers:
            api-version:
              $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/headers/api_version"
            warning:
              $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/headers/warning"
          content:
            application/hal+json:
              schema:
                $ref: '#/components/schemas/BewoningHistorieHalCollectie'
        '400':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/400"
        '401':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/401"
        '403':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/403"
        '406':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/406"
        '500':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/500"
        '501':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/501"
        '503':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/503"
        'default':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/default"
      tags:
      - Bewoning
  /verloop:
    get:
      operationId: GetBewoningverloop
      description: |
                    Raadpleeg het verloop van de bewoning van een adresseerbaar object over een periode door een adresseerbaarobjectIdentificatie en
                    een periode op te geven. Het antwoord bevat het aantal verhuizingen van en naar het object en het gemiddelde aantal bewoners in de opgegeven periode.
      parameters:
        - $ref: "#/components/parameters/datumVanRequired"
        - $ref: "#/components/parameters/datumTotEnMetRequired"
        - $ref: "#/components/parameters/adresseerbaarObjectIdentificatieRequired"
      responses:
        '200':
          description: |
                        Zoekactie geslaagd
          headers:
            api-version:
              $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/headers/api_version"
            warning:
              $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/headers/warning"
          content:
            application/hal+json:
              schema:
                $ref: '#/components/schemas/Verloop'
        '400':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/400"
        '401':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/401"
        '403':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/403"
        '404':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/404"
        '406':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/406"
        '500':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/500"
        '501':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/501"
        '503':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/503"
        'default':
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/responses/default"
      tags:
      - Bewoning
components:
  parameters:
    adresseerbaarObjectIdentificatieRequired:
      description: De unieke identificatie van een verblijfsobject, standplaats of ligplaats.
      name: adresseerbaarObjectIdentificatie
      in: query
      required: true
      schema:
        type: string
        pattern: '^[0-9]{16}$'
        example: '0226010000038820'
    datumVanRequired:
      name: datumVan
      in: query
      description: De begindatum van de periode waarover de resource wordt opgevraagd.
      required: true
      schema:
        type: string
        format: date
        example: "2018-09-09"
    datumTotEnMetRequired:
      name: datumTotEnMet
      in: query
      description: De einddatum van de periode waarover de resource wordt opgevraagd.
      required: true
      schema:
        type: string
        format: date
        example: "2018-10-09"
    fields:
      name: fields
      in: query
      required: true
      description: |
        Hiermee kun je de inhoud van de resource naar behoefte aanpassen door een door komma's gescheiden lijst van property namen op te geven.
        Bij opgave van niet-bestaande properties wordt een 400 Bad Request teruggegeven.
        Wanneer de fields parameter niet is opgegeven, worden alle properties met een waarde teruggegeven. Zie [functionele specificaties](https://github.com/VNG-Realisatie/Haal-Centraal-common/blob/v1.2.0/features/fields.feature)
      schema:
        type: string
        pattern: ^[a-zA-Z.,_]+$
    toonBewoonSamenstelling:
      description: |
        Geeft aan hoe de bewoning moet worden getoond:

        - false (default): alle bewoners van een adresseerbaarobject in de gevraagde periode
        - true: de gevraagde periode wordt gesplitst bij wijziging van bewoning samenstelling
      name: toonBewoonSamenstelling
      in: query
      required: false
      schema:
        type: boolean
        default: false
  schemas:
    BewoningHistorie:
      type: "object"
      description: |
                    Een bewoning is een adresseerbaar object(verblijfsobject, ligplaats of standplaats) met ingeschreven bewoner(s).
                    Iedere samenstelling van bewoners van het object is een bewoning.
      properties:
        adresseerbaarObjectIdentificatie:
          type: "string"
          description: |
                        De unieke identificatie van een verblijfsobject, standplaats of ligplaats.
        bewoningen:
          type: array
          items:
            $ref: '#/components/schemas/Bewoning'
        adressen:
          type: "array"
          items:
            $ref: "#/components/schemas/AdresUitgebreid"
    AdresUitgebreid:
      type: "object"
      allOf :
        - $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-BAG-bevragen/v1.1.0/specificatie/openapi.yaml#/components/schemas/Adres"
        - properties:
            nummeraanduidingIdentificatie:
              type: string
              description: |
                            De unieke aanduiding van een nummeraanduiding.
              example: "0518200001645858"
            korteNaam:
              description: |
                De officiële openbareruimtenaam uit de Basisregistratie Gebouwen en Adressen (BAG) of een verkorte versie.
              type: string
              maxLength: 24
              example: 'Ln vd l D-Westervoort'
            adresregel1:
              type: string
              description: |
                Het eerste deel van een adres is een combinatie van de straat en huisnummer.
              # example: "1600 Pennsylvania Avenue NW"
              example: "Laan van de landinrichtingscommissie Duiven-Westervoort 26A-3"
            adresregel2:
              type: string
              description: |
                Het tweede deel van een adres is een combinatie van woonplaats eventueel in combinatie met de postcode.
              # example: "Washington, DC 20500"
              example: "1234AA Nootdorp"
            adresregel3:
              type: string
              description: |
                Het derde deel van een adres is optioneel. Het gaat om een of meer geografische gebieden van het adres in het buitenland.
              example: "Selangor"
    BewoningHistorieHal:
      allOf:
      - $ref: "#/components/schemas/BewoningHistorie"
      - properties:
         _links:
           $ref: "#/components/schemas/BewoningHistorieLinks"
    BewoningHistorieHalCollectie:
      type: object
      properties:
        _links:
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/schemas/HalCollectionLinks"
        _embedded:
          $ref: "#/components/schemas/BewoningHistorieHalCollectieEmbedded"
    BewoningHistorieHalCollectieEmbedded:
      type: object
      properties:
        bewoningenhistorie:
          type: array
          items:
            $ref: '#/components/schemas/BewoningHistorieHal'
    BewoningHistorieLinks:
      type: object
      properties:
        ingeschrevenPersonen:
          description: De ingeschreven natuurlijk personen die bewoner zijn of waren.
          type: array
          items:
            $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/schemas/HalLink"
        nummeraanduidingen:
          type: array
          items:
            $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/schemas/HalLink"
        adresseerbaarObject:
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/schemas/HalLink"
    Bewoner:
      type: object
      description: |
        Een bewoner is een persoon die op een (verblijfs)object met een adres is ingeschreven of ingeschreven is geweest.
        * `datumAanvangAdreshouding` : Datum waarop de bewoner van dit adresseerbaar object is ingeschreven.
        * `datumTot` : Datum waarop de bewoner van dit adresseerbaar object is uitgeschreven.
      properties:
        burgerservicenummer:
          type: string
          example: "555555021"
        naam:
          $ref: 'https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-BRP-bevragen/v1.3.0/specificatie/genereervariant/openapi.yaml#/components/schemas/NaamPersoon'
        geheimhoudingPersoonsgegevens:
          type: boolean
          title: "Indicatie geheim"
          description: |
                        Gegevens mogen niet worden verstrekt aan derden / maatschappelijke instellingen.
        verblijfplaats:
          $ref: '#/components/schemas/Verblijfplaats'
    Verloop:
      type: object
      properties:
        inVerhuizingen:
          type: integer
          description: |
            Het aantal keren dat een alleenstaande of een gezin naar het verblijfsobject, de ligplaats of de standplaats is verhuisd binnen de opgegeven periode.
          example: 3
        uitVerhuizingen:
          type: integer
          description: |
            Het aantal keren dat een alleenstaande of een gezin naar een ander verblijfsobject, ligplaats of standplaats is verhuisd binnen de opgegeven periode.
          example: 14
        gemiddeldAantalBewoners:
          type: number
          format: float
          example: 2.7
          description: |
            Het gemiddelde aantal bewoners van het verblijfsobject, de ligplaats of de standplaats in de opgegeven periode.
    Bewoning:
      type: object
      properties:
        periode:
          $ref: '#/components/schemas/BewoningPeriode'
        bewoners:
          type: array
          items:
            $ref: '#/components/schemas/Bewoner'
        indicatieVeelBewoners:
          type: boolean
          description: |
            Geeft aan dat het adresseerbaar object zo veel bewoners heeft of had in de gevraagde periode dat zij
            niet in het antwoord worden opgenomen, met uitzondering van de persoon waarvan de BSN is opgegeven.
    BewoningPeriode:
      type: object
      properties:
        van:
          type: string
          format: date
        tot:
          type: string
          format: date
    Verblijfplaats:
      type: object
      properties:
        indicatieInOnderzoek:
          description: |
                        Geeft aan dat de verblijfplaats in onderzoek is.
          type: "boolean"
        functieAdres:
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-BRP-bevragen/v1.2.0/specificatie/openapi.yaml#/components/schemas/SoortAdres_enum"
        adreshouding:
          $ref: '#/components/schemas/AdreshoudingPeriode'
        nummeraanduidingIdentificatie:
          type: string
          description: |
            Unieke identificatie van een nummeraanduiding (en het bijbehorende adres) in de BAG.
          example: "0518200000366054"
    AdreshoudingPeriode:
      type: object
      properties:
        aanvang:
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/schemas/DatumOnvolledig"
        tot:
          $ref: "https://raw.githubusercontent.com/VNG-Realisatie/Haal-Centraal-common/v1.2.0/api-specificatie/common.yaml#/components/schemas/DatumOnvolledig"
